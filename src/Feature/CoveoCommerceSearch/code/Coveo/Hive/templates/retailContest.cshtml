<%
    var imagesUrl = coveoFieldValue("imagesurl");
    var stars = parseInt(coveoFieldValue("rating"));
    var imagesUrl = coveoFieldValue("imagesurl");
    var description = coveoFieldValue("description");
    var departement = coveoFieldValue("parentpath").substring(74);
    var noImage = "/-/media/Coveo Commerce/NoImage.png";
    var price = parseFloat(coveoFieldValue("listprice")).toFixed(2);
    var onSale = coveoFieldValue("onsale");
    var preOrderable = coveoFieldValue("preorderable");

    if (title == "Sitecore Experience Platform"){
        var clickUriSpecial = "http://retail.coveodemo.com/sitecore/content/Storefront/Home/Product%20catalog/sitecore"
    } else {
        var clickUriSpecial = "http://retail.coveodemo.com/sitecore/content/Storefront/Home/Product%20catalog/coveo"
    }
%>

<div class="coveo-result-frame coveoforsitecore-template">

    <div class="coveo-result-row">
        <div class="coveo-result-cell coveo-quick-view-container">
            <a class="CoveoResultLink" href="<%= clickUriSpecial %>">
                <% if (imagesUrl) { %>
                    <img class="coveo-retail-result-template-card-image" src="<%- imagesUrl[0]%>" />
                <% } else { %>
                    <img class="coveo-retail-result-template-card-image" src="<%- noImage %>" />
                <% } %>
            </a>
            <div class='CoveoQuickview' data-template-id="retailQuickviewTemplate" data-size='70%' data-always-show='true'></div>
        </div>

        <div class="coveo-result-cell coveoforsitecore-information-section">
            <div class="coveo-result-row">
                <div class="coveo-result-cell">
                    <div class="coveo-title">
                        <a class="CoveoResultLink" href="<%= clickUriSpecial %>"><%= title ? highlight(title, titleHighlights) : clickUriSpecial %></a>
                        <% if (onSale === "1") { %>
                            <span class="coveo-retail-onsale">On sale</span>
                        <% } %>
                        <% if (preOrderable === "1") { %>
                            <span class="coveo-retail-preorderable">Pre orderable</span>
                        <% } %>
                    </div>
                </div>
            </div>

            <div class="coveo-result-row">
                <div class="coveo-result-cell">
                    <% for (i = 0; i < stars; i++) { %>
                      <span class="coveo-retail-star glyphicon glyphicon-star"></span>
                    <% } %>
                    <div><%= highlightStreamText(description) %></div>
                </div>
            </div>

        </div>
    </div>
</div>